{% extends "accounts/auth_base.html" %}
{% block title %}Visitor Login{% endblock %}

{% block content %}
<style>
/* Override base template for dark theme */
body {
    background: linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%) !important;
    color: #ffffff !important;
    padding-top: 80px !important;
    padding-bottom: 20px !important;
    min-height: 100vh;
}

/* Override auth-card from base template */
.auth-card {
    max-width: 500px !important;
    background: #2d2d2d !important;
    border: 2px solid #666 !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6) !important;
}

/* Dark theme variables */
:root {
    --bg-input: #3a3a3a;
    --border: #666;
    --border-focus: #0099ff;
    --text-white: #ffffff;
    --text-muted: #cccccc;
    --primary: #0066cc;
    --danger: #ff4444;
}

/* Header styling */
.auth-header {
    padding: 2rem 1.5rem 1.5rem 1.5rem !important;
    background: none !important;
    border-bottom: 1px solid #444;
}

.auth-header h3 {
    color: var(--text-white) !important;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.auth-header p {
    color: var(--text-muted) !important;
    margin: 0;
}

/* Form styling */
.card-body {
    padding: 0 2rem 2rem 2rem !important;
    background: transparent !important;
}

.form-label {
    color: var(--text-white) !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem;
    display: block;
}

.form-control {
    background: var(--bg-input) !important;
    border: 2px solid var(--border) !important;
    color: var(--text-white) !important;
    padding: 0.875rem 1rem !important;
    border-radius: 8px !important;
    height: 3rem !important;
    transition: all 0.3s ease;
}

.form-control:focus {
    background: var(--bg-input) !important;
    border-color: var(--border-focus) !important;
    color: var(--text-white) !important;
    box-shadow: 0 0 0 0.2rem rgba(0, 153, 255, 0.25) !important;
    outline: none;
}

.form-control::placeholder {
    color: var(--text-muted) !important;
    opacity: 0.8;
}

/* Button styling */
.btn-primary {
    background: var(--primary) !important;
    border: 2px solid var(--primary) !important;
    color: white !important;
    font-weight: 600 !important;
    padding: 0.875rem 1.5rem !important;
    border-radius: 8px !important;
    height: 3rem;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: #0056b3 !important;
    border-color: #0056b3 !important;
    color: white !important;
    transform: translateY(-1px);
}

.btn-outline-primary {
    color: var(--primary) !important;
    border: 2px solid var(--primary) !important;
    background: transparent !important;
    font-weight: 500 !important;
    padding: 0.75rem 1.25rem !important;
    border-radius: 8px !important;
    transition: all 0.3s ease;
}

.btn-outline-primary:hover {
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    color: white !important;
}

/* Alert styling - override base template */
.alert-danger {
    background: rgba(255, 68, 68, 0.15) !important;
    color: #ffcccc !important;
    border: 2px solid var(--danger) !important;
    border-radius: 8px !important;
}

/* Navbar override for dark theme */
.navbar-dark {
    background: #1a1a1a !important;
    border-bottom: 1px solid #333;
}

.text-muted {
    color: var(--text-muted) !important;
}

.mb-3 {
    margin-bottom: 1.25rem !important;
}

.mb-4 {
    margin-bottom: 1.5rem !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    body {
        padding-top: 70px !important;
    }
    
    .auth-card {
        margin: 1rem;
        max-width: calc(100% - 2rem) !important;
    }
    
    .auth-header {
        padding: 1.5rem 1rem 1rem 1rem !important;
    }
    
    .card-body {
        padding: 0 1.5rem 1.5rem 1.5rem !important;
    }
    
    .form-control {
        height: 2.8rem !important;
        padding: 0.75rem !important;
    }
    
    .btn-primary {
        height: 2.8rem;
        padding: 0.75rem 1.25rem !important;
    }
}

/* Make icons visible */
.bi {
    color: var(--primary) !important;
}

.text-primary {
    color: var(--primary) !important;
}
</style>

<div class="auth-header">
    <i class="bi bi-shield-lock-fill fs-1"></i>
    <h3>Visitor Login</h3>
    <p>Kerala Prison Management System</p>
</div>

<div class="card-body">
    <!-- Login Form -->
    <form method="post">
        {% csrf_token %}
        
        <div class="mb-3">
            <label class="form-label">
                <i class="bi bi-person me-2"></i>Username
            </label>
            <input type="text" 
                   name="username" 
                   class="form-control" 
                   placeholder="Enter your username"
                   required
                   autocomplete="username"
                   value="{{ request.POST.username|default:'' }}">
        </div>
        
        <div class="mb-3">
            <label class="form-label">
                <i class="bi bi-lock me-2"></i>Password
            </label>
            <input type="password" 
                   name="password" 
                   class="form-control" 
                   placeholder="Enter your password"
                   required
                   autocomplete="current-password">
        </div>

        <button type="submit" class="btn btn-primary w-100 mb-4">
            <i class="bi bi-box-arrow-in-right me-2"></i>Login
        </button>
    </form>

    <div class="text-center">
        <p class="text-muted mb-3">Need an account?</p>
        <a href="{% url 'register' %}" class="btn btn-outline-primary">
            <i class="bi bi-person-plus me-2"></i>Register Here
        </a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-focus username field
    const usernameField = document.querySelector('input[name="username"]');
    if (usernameField) {
        setTimeout(() => usernameField.focus(), 100);
    }
});
</script>
{% endblock %}
